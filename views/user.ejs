<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NoteMates</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/home.css">
</head>

<body>
<%- include("partials/navbar") %>
<%- include("partials/messages") %>

<link rel="stylesheet" href="/note.css">

<div class="notes-hero">
  <h1>Welcome, <%= user.username %> </h1>
  <p class="lead">Your dashboard is live. Manage your notes, track uploads, and boost your productivity.</p>
</div>


<% if (!notes || notes.length === 0) { %>
  <div class="notes-hero">
    <p class="lead">No notes found yet. Be the first to <a href="/upload">upload</a> a note!</p>
  </div>
<% } else { %>

  <div class="notes-grid">
    <% notes.forEach(note => { %>
      <div class="note-card" role="article" aria-label="<%= note.subject %>">
        <div class="note-title">
          <h3><%= note.subject %></h3>
          <% if (note.description) { %>
            <span class="note-badge"><%= note.description %></span>
          <% } %>
        </div>

        <div class="note-desc"><%= note.title %></div>

        <div class="note-meta">
          <div class="left">
            <small>Uploaded by <strong><%= note.uploadedBy || "Unknown" %></strong></small>
            &nbsp;&nbsp;
            <small><%= note.uploadedAt ? new Date(note.uploadedAt).toLocaleDateString() : "" %></small>
          </div>

          <div class="note-actions">
            <a href="/viewpdf/<%= note._id %>" target="_blank" class="btn btn-outline-light">
        <i class="fa-solid fa-eye"></i> View
    </a>

    <a href="/download/<%= note._id %>" class="btn btn-outline-light">
        <i class="fa-solid fa-download"></i> Download
    </a>
          </div>
        </div>
      </div>
    <% }) %>
  </div>

<% } %>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
